---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const books = await getCollection('books');
---

<BaseLayout title="Bücher" description="Bücher die ich lese und empfehle">
  <div class="max-w-4xl mx-auto px-6 py-12">
    <h1 class="text-4xl font-bold mb-4">Bücher</h1>
    <p class="text-gray-600 mb-8">Was ich lese und empfehle.</p>

    <div class="grid gap-6 md:grid-cols-2">
      {books.length > 0 ? (
        books.map((book) => (
          <div class="p-6 border border-gray-200 rounded-lg hover:border-primary-300 transition-colors">
            <h3 class="font-semibold text-lg">{book.data.title}</h3>
            <p class="text-gray-500 text-sm">{book.data.author}</p>
            <p class="text-gray-600 mt-3 text-sm">{book.data.note}</p>
            {book.data.rating && (
              <p class="mt-2 text-yellow-500">{'★'.repeat(book.data.rating)}{'☆'.repeat(5 - book.data.rating)}</p>
            )}
          </div>
        ))
      ) : (
        <p class="text-gray-500 col-span-2">Noch keine Bücher eingetragen. Füge sie in <code class="bg-gray-100 px-2 py-1 rounded">src/content/books/</code> hinzu.</p>
      )}
    </div>
  </div>
</BaseLayout>
